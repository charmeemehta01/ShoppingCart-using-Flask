<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Signup</title>
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
		<link href="{{ url_for('static', filename='css/style.css') }}" rel="stylesheet" type="text/css" />
		<meta charset="utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<link href="https://fonts.googleapis.com/css?family=Roboto:400,700" rel="stylesheet" />
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" />
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
		<link href="static/css/signup.css" rel="stylesheet" type="text/css" />
	</head>
	<body onload="generate()">
		<div class="navbar">
			<ul>
				<li><a href="/"> Home</a></li>
				<li><a href="view_cart">Cart</a></li>
				<li class="in"><a href="Signin">Sign in</a></li>
			</ul>
		</div>

		{% if status is defined and status =='exists' %}
		<script type="text/javascript">
			alert("Email ID exists. Please try again with a different ID.");
		</script>
		{% elif status is defined and status =='invalid' %}
		<script type="text/javascript">
			alert("Invalid Login credentials. Please try again.");
		</script>
		{% endif %}

		<div class="signup-form">
			<form action="signup" onsubmit="signup()" method="POST">
				<h2>Sign Up</h2>
				<p>Please fill in this form to create an account!</p>
				<hr />
				<div class="form-group">
					<input type="text" class="form-control" name="user_name" id="user_name" placeholder="User Name" required="required" />
				</div>
				<div class="form-group">
					<input type="email" class="form-control" name="email" id="email" placeholder="Email" required="required" />
				</div>
				<div class="form-group">
					<input type="password" class="form-control" name="password" id="password" placeholder="Password" required="required" />
				</div>
				<div class="form-group">
					<input type="password" class="form-control" name="confirm_password" id="confirm_password" placeholder="Confirm Password" required="required" />
				</div>
				<div class="form-group">
					<button type="submit" class="btn btn-primary btn-lg">Sign Up</button>
				</div>
				<input type="hidden" class="form-control" name="pin" id="pin" />
			</form>
			<div class="hint-text">Already have an account? <a href="#myModal" class="trigger-btn" data-toggle="modal">Login here</a></div>
			<div id="myModal" class="modal fade">
				<div class="modal-dialog modal-login">
					<div class="modal-content">
						<div class="modal-header">
							<h4 class="modal-title">Member Login</h4>
							<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
						</div>
						<div class="modal-body">
							<form action="signincheck" method="post">
								<div class="form-group">
									<i class="fa fa-user"></i>
									<input type="email" class="form-control" placeholder="Email" name="signin_email" required="required" />
								</div>
								<div class="form-group">
									<i class="fa fa-lock"></i>
									<input type="password" class="form-control" placeholder="Password" name="signin_password" required="required" />
								</div>
								<div class="form-group">
									<input type="submit" class="btn btn-primary btn-block btn-lg" value="Login" />
								</div>
							</form>
						</div>
					</div>
				</div>
			</div>
		</div>
	</body>
	<script>
		function generate() {
			var min = 1000;
			var max = 9999;
			var random = Math.floor(Math.random() * (+max - +min) + +min);
			document.getElementById("pin").value = random;
			console.log(document.getElementById("pin").value);
		}
		function signup() {
			var pass = document.getElementById("password").value;
			var conf = document.getElementById("confirm_password").value;
			if (pass.localeCompare(conf) === 0) {
				alert("Your PIN is: " + random + ". This will be required for transaction purposes.");
				sleep(1000);
			} else {
				alert("Passwords do not match. Please try again.");
			}
		}
		function func1() {
			alert("Email ID exists. Please try again with a different ID.");
		}
		function func2() {
			alert("Invalid.");
		}
	</script>
</html>
